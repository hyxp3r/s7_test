
# S7 IT Test

В ходе разработки было написано приложение с использованием фреймворка FastAPI. Для запуска приложения необходимо перейти в директорию **/src** и написать **/sh** команду в терминале:

```
uvicorn main:app --reload
```
Далее необходимо запустить планировщик с использованием библиотеки **Celery**. Блокером и бекэндом для Celery служит **Redis**
```
celery -A worker.celery worker --loglevel=info --logfile=celery.log
```
Благодаря **--logfile=celery.log** будет создан файл с логированием задач планировщика

## Обоснование выбора сторонних библиотек

Были использованы следующие библиотеки:

* celery - для создания планировщика задач. Альернатива - написание своего воркера (бесконечный цикл с проверкой времени) или же использование планировщика задач ОС, я бы выбрал **crontab** на Linux
* redis - брокер и бэкенд для celery
* psycopg2 - для синхронного взаимодействия с postgres в celery (избежание создание async def - конфликт с celery)
* asyncpg - для обработки async запросов от пользователя в роутере
* pytest, pytesr-asyncio - написание тестов, которые я не закончил((
* loguru - удобный декоратор для логов



## Дополнительные требования

1.Процессы сохранения файла в папку и в БД желательно сделать параллельными.

Выполнено с использованием  **concurrent.futures, functools import partial**

2.Базу данных и таблицу flight создать при первом запуске программы

Выполнено. База и таблицы создаются при запуске app. Но было бы лучше создавать базу заранее или же с использованием bash-скрипта при старте  **docker**.

3.Все действия сервиса должны выводиться в лог

Выполнено. 

4.Реализовать REST API метод для выборки всех рейсов из таблицы flight за определённую дату

Выполнено, реализован метод **get_flights**

5.Ответить на вопрос: каким образом можно ускорить запрос на выборку данных, при большом объеме данных.

Если есть возможность - использовать кэширование. Также нужно настроить переодическое индексирование БД (в данном случае по столбцу с датой)

